---
category: Operating System
curated_by: Claude Sonnet 4.5
difficulty: medium
generated: 2026-02-09
interview_frequency: high
prerequisites:
- Paging
related:
- Paging
- Paging-Segmentation
- Memory-Management
sources: 1
subtopic: Segmentation
tags:
- segmentation
- memory-allocation
- virtual-address
- external-fragmentation
- paging
---

# Segmentation (ì„¸ê·¸ë¨¼í…Œì´ì…˜)

## ğŸ“ ê¸°ì¡´ ë°©ì‹ì˜ ë¬¸ì œì 

### ë¹„íš¨ìœ¨ì ì¸ ë©”ëª¨ë¦¬ í• ë‹¹

**ë¬¸ì œ:**
- Heapê³¼ Stack ì‚¬ì´ì˜ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê³µê°„ë„ í• ë‹¹
- ë©”ëª¨ë¦¬ ê³µê°„ ë‚­ë¹„
- í° ì£¼ì†Œ ê³µê°„ì— í”„ë¡œì„¸ìŠ¤ ì§€ì› ë¶ˆê°€
- Code ê³µê°„ì— ì¤‘ë³µ ë°œìƒ

**í•´ê²°:** Segmentation

---

## ğŸ”‘ Segmentationì´ë€?

**ê°€ìƒ ì£¼ì†Œ ê³µê°„ì„ ì„¸ê·¸ë¨¼íŠ¸ ë‹¨ìœ„ë¡œ ì‹¤ì œ ë©”ëª¨ë¦¬ì— ë…ë¦½ì ìœ¼ë¡œ ë§¤í•‘**

**ì„¸ê·¸ë¨¼íŠ¸:** ë©”ëª¨ë¦¬ì—ì„œ ì¼ì • ë¶€ë¶„

**ì¼ë°˜ì  êµ¬ì„±:** Code, Stack, Heap (3ê°œ ì„¸ê·¸ë¨¼íŠ¸)

---

## âœ… Segmentationì˜ ì¥ì 

**1. ë©”ëª¨ë¦¬ ê³µê°„ ë‚­ë¹„ ì œê±°**

**2. ë” ë§ì€ ì£¼ì†Œ ê³µê°„ ì§€ì›**

**3. Code ê³µìœ ë¡œ ë©”ëª¨ë¦¬ ì ˆì•½**

---

## ğŸ”„ ì£¼ì†Œ ë³€í™˜ ë°©ë²•

### ê°€ìƒ ì£¼ì†Œ êµ¬ì„±

**ê°€ìƒ ì£¼ì†Œ = Segment ID + Offset**

**Segment ID:** ìƒìœ„ 2ë¹„íŠ¸

**Offset:** í•˜ìœ„ 12ë¹„íŠ¸

---

### ë³€í™˜ ê³¼ì • (Heap ì˜ˆì‹œ)

```
ê°€ìƒ ì£¼ì†Œ: 0x4068

1. Segment ID ì¶”ì¶œ
   â†’ 01 (Heap)

2. Offset ê³„ì‚° (16ì§„ìˆ˜ â†’ 10ì§„ìˆ˜)
   â†’ 0x068 = 104

3. Segmentation Fault í™•ì¸
   â†’ Offset(104) < Bound(2K) âœ…

4. ë¬¼ë¦¬ ì£¼ì†Œ ê³„ì‚°
   â†’ Base + Offset
   â†’ 26KB + 104
```

---

### ì½”ë“œ êµ¬í˜„

```c
// ìƒìœ„ 2ë¹„íŠ¸ ì¶”ì¶œ
Segment = (VirtualAddress & SEG_MASK) >> SEG_SHIFT

// í•˜ìœ„ 12ë¹„íŠ¸ë¡œ offset ì¶”ì¶œ
Offset = VirtualAddress & OFFSET_MASK

// Segmentation Fault í™•ì¸
if (Offset >= Bounds[Segment])
    RaiseException(PROTECTION_FAULT)
else
    PhysAddr = Base[Segment] + Offset
    Register = AccessMemory(PhysAddr)
```

---

## ğŸ“š Stackì˜ íŠ¹ë³„í•œ ì²˜ë¦¬

### Stackì˜ íŠ¹ì§•

**ì„±ì¥ ë°©í–¥:** ê±°ê¾¸ë¡œ í™•ì¥ (Negative)

**Base ìœ„ì¹˜:** ê°€ì¥ ë†’ì€ ì£¼ì†Œ

**ê³„ì‚° ë°©ì‹:** Base - Offset

---

### Stack ë³€í™˜ ê³¼ì •

```
ê°€ìƒ ì£¼ì†Œ: 0xA00

1. Segment ID ì¶”ì¶œ
   â†’ 10 (Stack)

2. Offset ê³„ì‚°
   â†’ 0xA00 = 2560

3. Segmentation Fault í™•ì¸
   â†’ Offset(2560) < Bound(3K) âœ…

4. ë¬¼ë¦¬ ì£¼ì†Œ ê³„ì‚°
   â†’ Base - Offset
   â†’ 36KB - 2560
```

---

## ğŸ”— Code Sharing

**ë‹¤ì¤‘ í”„ë¡œì„¸ìŠ¤ê°€ Code ì„¸ê·¸ë¨¼íŠ¸ ê³µìœ  ê°€ëŠ¥**

**ê¶Œí•œ:**
- âœ… ì½ê¸° ê°€ëŠ¥
- âœ… ì‹¤í–‰ ê°€ëŠ¥
- âŒ ê°’ ë³€ê²½ ë¶ˆê°€

**ëª©ì :** ë©”ëª¨ë¦¬ ì ˆì•½

---

## âš ï¸ Segmentationì˜ ë¬¸ì œì 

### 1. Context Switch

**ë¬¸ì œ:** ì„¸ê·¸ë¨¼íŠ¸ ë ˆì§€ìŠ¤í„° ê´€ë¦¬

**í•´ê²°:** Base & Bound ë ˆì§€ìŠ¤í„° ê°’ ì €ì¥/ë³µì›

---

### 2. ì„¸ê·¸ë¨¼íŠ¸ í¬ê¸° ë³€ê²½

**ìƒí™©:** Heap ê³µê°„ ë¶€ì¡±

**í•´ê²°:** sbrk() system call ì‚¬ìš©

**sbrk():** Heapì„ ëŠ˜ë¦¬ê±°ë‚˜ ì¤„ì´ëŠ” í•¨ìˆ˜

---

### 3. ì™¸ë¶€ ë‹¨í¸í™” (External Fragmentation)

**ë¬¸ì œ:**
- í”„ë¡œì„¸ìŠ¤ë§ˆë‹¤ í¬ê¸°ê°€ ë‹¤ë¦„
- ì„¸ê·¸ë¨¼íŠ¸ í¬ê¸°ë„ ëª¨ë‘ ë‹¤ë¦„
- ì™¸ë¶€ê°€ ì˜ê²Œ ìª¼ê°œì§

**ì˜ˆì‹œ:**
```
ì „ì²´ ì—¬ìœ  ê³µê°„: 24KB (16KB + 4KB + 4KB)
ìš”ì²­ í¬ê¸°: 20KB
â†’ í• ë‹¹ ë¶ˆê°€ (ì¸ì ‘í•˜ì§€ ì•ŠìŒ)
```

---

## ğŸ”§ ì™¸ë¶€ ë‹¨í¸í™” í•´ê²° ë°©ë²•

### 1. Compaction

**ë°©ë²•:** ê¸°ì¡´ ì„¸ê·¸ë¨¼íŠ¸ ì¬ë°°ì¹˜

**ì¥ì :** ì—¬ìœ  ê³µê°„ í†µí•©

**ë‹¨ì :** ë¹„ìš© ë°œìƒ, ì„±ëŠ¥ ì €í•˜

---

### 2. Paging (í˜ì´ì§•)

**ë°©ë²•:** ê³ ì • í¬ê¸° ì„¸ê·¸ë¨¼íŠ¸ ì‚¬ìš©

**ì¥ì :** ì™¸ë¶€ ë‹¨í¸í™” ì œê±°

**ë‹¨ì :** ë‚´ë¶€ ë‹¨í¸í™” ë°œìƒ

**ë‚´ë¶€ ë‹¨í¸í™” ì˜ˆì‹œ:**
```
ìš”ì²­: 15KB
í• ë‹¹: 8KB Ã— 2 = 16KB
ë‚­ë¹„: 1KB
```

---

## ğŸ“Š ì •ë¦¬

### Segmentationì˜ ëª©ì 

**Heapê³¼ Stack ì‚¬ì´ ê³µê°„ ë‚­ë¹„ í•´ê²°**

**ì„¸ê·¸ë¨¼íŠ¸ ë‹¨ìœ„ë¡œ ë¶„ë¦¬í•˜ì—¬ íš¨ìœ¨ì„± ì¦ëŒ€**

---

### Segmentationì˜ í•œê³„

**ì™¸ë¶€ ë‹¨í¸í™” ë¬¸ì œ ë°œìƒ**

**í•´ê²°ì±…:** Paging ê¸°ë²• ë„ì…

---

## â“ ë©´ì ‘ ì§ˆë¬¸ ì˜ˆì‹œ

### Q1. Segmentationì€ ë¬´ì—‡ì´ê³ , ì–´ë–¤ ì¥ì ì´ ìˆë‚˜ìš”?

**ë‹µë³€:**
Segmentationì€ ê°€ìƒ ì£¼ì†Œ ê³µê°„ì„ ì„¸ê·¸ë¨¼íŠ¸ ë‹¨ìœ„(Code, Stack, Heap)ë¡œ ì‹¤ì œ ë©”ëª¨ë¦¬ì— ë…ë¦½ì ìœ¼ë¡œ ë§¤í•‘í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤. Heapê³¼ Stack ì‚¬ì´ì˜ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê³µê°„ì„ ì œê±°í•˜ì—¬ ë©”ëª¨ë¦¬ ê³µê°„ ë‚­ë¹„ë¥¼ ë§‰ê³ , ë” ë§ì€ ì£¼ì†Œ ê³µê°„ì„ ì§€ì›í•  ìˆ˜ ìˆìœ¼ë©°, Codeë¥¼ ê³µìœ í•˜ì—¬ ë©”ëª¨ë¦¬ë¥¼ ì ˆì•½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### Q2. Segmentationì—ì„œ ì£¼ì†Œ ë³€í™˜ì€ ì–´ë–»ê²Œ í•˜ë‚˜ìš”?

**ë‹µë³€:**
ê°€ìƒ ì£¼ì†ŒëŠ” Segment IDì™€ Offsetìœ¼ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤. ìƒìœ„ 2ë¹„íŠ¸ë¡œ Segment IDë¥¼ ì¶”ì¶œí•˜ê³ , í•˜ìœ„ 12ë¹„íŠ¸ë¡œ Offsetì„ ê³„ì‚°í•©ë‹ˆë‹¤. Offsetì´ Boundë³´ë‹¤ ì‘ì€ì§€ í™•ì¸í•˜ì—¬ Segmentation Faultë¥¼ ë°©ì§€í•˜ê³ , Base + Offsetìœ¼ë¡œ ë¬¼ë¦¬ ì£¼ì†Œë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤. Stackì€ ê±°ê¾¸ë¡œ í™•ì¥ë˜ë¯€ë¡œ Base - Offsetìœ¼ë¡œ ê³„ì‚°í•©ë‹ˆë‹¤.

### Q3. Segmentationì˜ ë¬¸ì œì ê³¼ í•´ê²° ë°©ì•ˆì€?

**ë‹µë³€:**
Segmentationì˜ ê°€ì¥ í° ë¬¸ì œì ì€ ì™¸ë¶€ ë‹¨í¸í™”ì…ë‹ˆë‹¤. í”„ë¡œì„¸ìŠ¤ë§ˆë‹¤ í¬ê¸°ê°€ ë‹¤ë¥´ê¸° ë•Œë¬¸ì— ì„¸ê·¸ë¨¼íŠ¸ í¬ê¸°ë„ ëª¨ë‘ ë‹¬ë¼ ë©”ëª¨ë¦¬ê°€ ì˜ê²Œ ìª¼ê°œì§‘ë‹ˆë‹¤. ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ Compactionìœ¼ë¡œ ì„¸ê·¸ë¨¼íŠ¸ë¥¼ ì¬ë°°ì¹˜í•˜ê±°ë‚˜, Paging ê¸°ë²•ìœ¼ë¡œ ê³ ì • í¬ê¸° ì„¸ê·¸ë¨¼íŠ¸ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. Pagingì€ ì™¸ë¶€ ë‹¨í¸í™”ë¥¼ ì œê±°í•˜ì§€ë§Œ ë‚´ë¶€ ë‹¨í¸í™”ê°€ ë°œìƒí•©ë‹ˆë‹¤.

### Q4. Stack ì„¸ê·¸ë¨¼íŠ¸ëŠ” ì™œ íŠ¹ë³„í•˜ê²Œ ì²˜ë¦¬í•˜ë‚˜ìš”?

**ë‹µë³€:**
Stackì€ Codeì™€ Heapê³¼ ë‹¬ë¦¬ ê±°ê¾¸ë¡œ í™•ì¥ë˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. Codeì™€ Heapì€ Signì´ Positiveì´ì§€ë§Œ Stackì€ Negativeì…ë‹ˆë‹¤. Stack ì„¸ê·¸ë¨¼íŠ¸ì˜ BaseëŠ” ê°€ì¥ ë†’ì€ ì£¼ì†Œì—ì„œ ì‹œì‘í•˜ë©°, ë¬¼ë¦¬ ì£¼ì†Œ ê³„ì‚° ì‹œ Base - Offsetìœ¼ë¡œ ê³„ì‚°í•©ë‹ˆë‹¤.

### Q5. Code Sharingì€ ì–´ë–»ê²Œ ë™ì‘í•˜ë‚˜ìš”?

**ë‹µë³€:**
Segmentationì€ ì¶”ê°€ì ì¸ í•˜ë“œì›¨ì–´ ì§€ì›ì„ í†µí•´ ì£¼ì†Œ ê³µê°„ ì‚¬ì´ì—ì„œ Code ì„¸ê·¸ë¨¼íŠ¸ë¥¼ ê³µìœ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¤ì¤‘ í”„ë¡œì„¸ìŠ¤ê°€ Code ì„¸ê·¸ë¨¼íŠ¸ë¥¼ ê³µìœ í•˜ì—¬ ë©”ëª¨ë¦¬ë¥¼ ì ˆì•½í•  ìˆ˜ ìˆìœ¼ë©°, ì½ê³  ì‹¤í–‰ì€ ê°€ëŠ¥í•˜ì§€ë§Œ ê°’ì„ ë³€ê²½í•  ìˆ˜ëŠ” ì—†ìŠµë‹ˆë‹¤.

---

## ğŸ“š ì›ë³¸ ì°¸ê³  ìë£Œ

### ì¶œì²˜: 2023-CS-Study
- íŒŒì¼: `/Users/PARK/Desktop/MyBook/2023-CS-Study/OS/os_segmentation.md`
- ë‚´ìš©: Segmentation, ì£¼ì†Œ ë³€í™˜, ì™¸ë¶€ ë‹¨í¸í™”

### ì¶”ê°€ í•™ìŠµ ìë£Œ

- [Operating Systems Three Easy Pieces](https://www.amazon.com/Operating-Systems-Three-Easy-Pieces/dp/198508659X)
- [Segmentationì„ ì‚¬ìš©í•œ ê°€ë³€ í¬ê¸° ë©”ëª¨ë¦¬ ê´€ë¦¬](https://icksw.tistory.com/145)
- [Segmentation ì •ë¦¬](https://fancy96.github.io/OS-16-Segmentation/)